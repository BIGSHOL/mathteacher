"""초등학교 3학년 연산 문제 시드 데이터.

커버 단원:
  1학기 1단원 - 덧셈과 뺄셈
  1학기 3단원 - 나눗셈
  1학기 4단원 - 곱셈
  2학기 7단원 - 곱셈 (2)
  2학기 8단원 - 나눗셈 (2)
"""

from .._base import concept, mc


def get_concepts() -> list[dict]:
    """연산 개념 10개 반환 (단원당 2개)."""
    return [
        # ━━ 1학기 1단원: 덧셈과 뺄셈 ━━
        concept(
            id="concept-e3-add-sub-01",
            name="덧셈과 뺄셈 - 받아올림 있는 덧셈",
            grade="elementary_3",
            category="computation",
            part="calc",
            description="세 자리 수의 덧셈에서 각 자리의 합이 10 이상일 때 상위 자릿수로 1을 올리는 받아올림 원리를 이해합니다.",
        ),
        concept(
            id="concept-e3-add-sub-02",
            name="덧셈과 뺄셈 - 받아내림 있는 뺄셈",
            grade="elementary_3",
            category="computation",
            part="calc",
            description="세 자리 수의 뺄셈에서 상위 자리에서 1을 빌려 10으로 바꾸는 받아내림(재구조화) 원리를 이해합니다.",
        ),
        # ━━ 1학기 4단원: 곱셈 ━━
        concept(
            id="concept-e3-mul1-01",
            name="곱셈 (1) - (몇십몇)×(몇) 기본 계산",
            grade="elementary_3",
            category="computation",
            part="calc",
            description="(몇십몇)×(몇) 계산에서 십의 자리와 일의 자리를 분리하여 각각 곱하는 원리를 이해합니다.",
        ),
        concept(
            id="concept-e3-mul1-02",
            name="곱셈 (1) - 분배법칙의 기초와 올림",
            grade="elementary_3",
            category="computation",
            part="calc",
            description="분배법칙의 기초(23×4=20×4+3×4)를 이해하고, 올림이 있는 곱셈을 정확히 계산합니다.",
        ),
        # ━━ 1학기 3단원: 나눗셈 ━━
        concept(
            id="concept-e3-div1-01",
            name="나눗셈 (1) - 등분제와 포함제",
            grade="elementary_3",
            category="computation",
            part="calc",
            description="등분제(똑같이 나누기)와 포함제(몇 묶음인지 구하기) 두 가지 나눗셈 의미를 이해합니다.",
        ),
        concept(
            id="concept-e3-div1-02",
            name="나눗셈 (1) - 곱셈과 나눗셈의 관계",
            grade="elementary_3",
            category="computation",
            part="calc",
            description="12÷3=4 ↔ 3×4=12와 같이 곱셈과 나눗셈의 역연산 관계를 이해하고, 나눗셈의 교환법칙 불성립을 알아봅니다.",
        ),
        # ━━ 2학기 7단원: 곱셈 (2) ━━
        concept(
            id="concept-e3-mul2-01",
            name="곱셈 (2) - (세 자리 수)×(한 자리 수)",
            grade="elementary_3",
            category="computation",
            part="calc",
            description="(세 자리 수)×(한 자리 수) 세로셈에서 받아올림을 정확히 처리하여 계산합니다.",
        ),
        concept(
            id="concept-e3-mul2-02",
            name="곱셈 (2) - (두 자리 수)×(두 자리 수)",
            grade="elementary_3",
            category="computation",
            part="calc",
            description="(두 자리 수)×(두 자리 수) 세로셈에서 부분 곱을 자릿수에 맞추어 합산하는 알고리즘을 이해합니다.",
        ),
        # ━━ 2학기 8단원: 나눗셈 (2) ━━
        concept(
            id="concept-e3-div2-01",
            name="나눗셈 (2) - 나머지가 있는 나눗셈과 검산",
            grade="elementary_3",
            category="computation",
            part="calc",
            description="나머지가 있는 나눗셈을 계산하고, 검산(A=B×Q+R)과 나머지<나누는 수 조건을 확인합니다.",
        ),
        concept(
            id="concept-e3-div2-02",
            name="나눗셈 (2) - 나머지의 맥락적 해석",
            grade="elementary_3",
            category="computation",
            part="calc",
            description="나머지가 있을 때 올림 상황(텐트 배정)과 버림 상황(사탕 나누기)을 구별하여 해석합니다.",
        ),
    ]


def get_questions() -> list[dict]:
    """연산 문제 15개 반환 (단원당 3개)."""
    return [
        # ━━━━━━━━━━━━━━━━━━━━━━━━━━
        # 1학기 1단원: 덧셈과 뺄셈
        # ━━━━━━━━━━━━━━━━━━━━━━━━━━
        mc(
            id="e3-comp-001",
            concept_id="concept-e3-add-sub-02",
            category="computation",
            part="calc",
            difficulty=3,
            content="계산 과정을 보고 틀린 곳을 찾으세요.\n\n  423\n- 157\n-----\n  334\n\n어느 자리에서 처음 실수가 발생했나요?",
            options=[
                ("일의 자리", "일의 자리"),
                ("십의 자리", "십의 자리"),
                ("백의 자리", "백의 자리"),
                ("틀린 곳이 없다", "틀린 곳이 없다"),
            ],
            correct="일의 자리",
            explanation="일의 자리에서 3-7이 안 되니까 십의 자리에서 1을 빌려와야 합니다. "
            "13-7=6이 되어야 하는데, 큰 수-작은 수 규칙을 잘못 적용해 7-3=4로 계산한 오류입니다. (정답: 266)",
        ),
        mc(
            id="e3-comp-002",
            concept_id="concept-e3-add-sub-02",
            category="computation",
            part="calc",
            difficulty=4,
            content="받아내림을 할 때, 십의 자리에서 가져온 수는 실제로 얼마를 의미하나요?\n\n  524\n-  78\n-----",
            options=[
                ("1", "1"),
                ("10", "10"),
                ("100", "100"),
                ("0.1", "0.1"),
            ],
            correct="10",
            explanation="십의 자리 숫자 1개는 실제로 10을 의미합니다. "
            "따라서 십의 자리에서 1을 빌려오면 일의 자리에서는 10으로 사용할 수 있습니다. "
            "이것이 자릿값의 핵심 원리입니다.",
        ),
        mc(
            id="e3-comp-003",
            concept_id="concept-e3-add-sub-01",
            category="computation",
            part="calc",
            difficulty=5,
            content="다음 계산에서 받아올림이 일어나는 자리를 모두 고르세요.\n\n  378\n+ 465\n-----",
            options=[
                ("일의 자리만", "일의 자리만"),
                ("십의 자리만", "십의 자리만"),
                ("일의 자리, 십의 자리", "일의 자리, 십의 자리"),
                ("백의 자리", "백의 자리"),
            ],
            correct="일의 자리, 십의 자리",
            explanation="일의 자리: 8+5=13 (10 이상이므로 받아올림)\n"
            "십의 자리: 7+6+1(받아올림)=14 (10 이상이므로 받아올림)\n"
            "백의 자리: 3+4+1(받아올림)=8 (10 미만이므로 받아올림 없음)\n"
            "따라서 일의 자리와 십의 자리에서 받아올림이 발생합니다.",
        ),
        # ━━━━━━━━━━━━━━━━━━━━━━━━━━
        # 1학기 4단원: 곱셈
        # ━━━━━━━━━━━━━━━━━━━━━━━━━━
        mc(
            id="e3-comp-004",
            concept_id="concept-e3-mul1-02",
            category="computation",
            part="calc",
            difficulty=3,
            content="23 × 4를 계산하는 과정입니다. 빈칸에 들어갈 알맞은 수는?\n\n23 × 4 = (20 + 3) × 4\n      = 20 × 4 + 3 × 4\n      = 80 + (   )\n      = 92",
            options=[
                ("7", "7"),
                ("12", "12"),
                ("34", "34"),
                ("43", "43"),
            ],
            correct="12",
            explanation="3 × 4 = 12입니다. "
            "이것이 분배법칙의 기초로, 23을 20과 3으로 나누어 각각 곱한 후 더하는 원리입니다.",
        ),
        mc(
            id="e3-comp-005",
            concept_id="concept-e3-mul1-01",
            category="computation",
            part="calc",
            difficulty=4,
            content="다음 중 46 × 2를 바르게 계산한 것은?",
            options=[
                ("40 × 2 + 6 × 2 = 80 + 12 = 92", "40 × 2 + 6 × 2 = 80 + 12 = 92"),
                ("4 × 2 + 6 × 2 = 8 + 12 = 20", "4 × 2 + 6 × 2 = 8 + 12 = 20"),
                ("46 × 1 + 46 × 1 = 46 + 46 = 82", "46 × 1 + 46 × 1 = 46 + 46 = 82"),
                ("460 × 2 = 920", "460 × 2 = 920"),
            ],
            correct="40 × 2 + 6 × 2 = 80 + 12 = 92",
            explanation="46을 40과 6으로 나누어 각각 2를 곱한 후 더해야 합니다. "
            "십의 자리 '4'는 실제로 '40'을 의미하므로 40 × 2 = 80이 되어야 합니다. "
            "'4 × 2 = 8'로 계산하는 것은 자릿수를 무시한 오류입니다.",
        ),
        mc(
            id="e3-comp-006",
            concept_id="concept-e3-mul1-02",
            category="computation",
            part="calc",
            difficulty=6,
            content="모눈종이에서 가로 23칸, 세로 4칸의 직사각형 넓이를 구할 때, "
            "20 × 4 영역과 3 × 4 영역으로 나누어 계산하는 이유는?",
            options=[
                ("계산을 빠르게 하기 위해", "계산을 빠르게 하기 위해"),
                ("23을 자릿값에 따라 20과 3으로 나누어 각각 계산하기 위해", "23을 자릿값에 따라 20과 3으로 나누어 각각 계산하기 위해"),
                ("4를 2와 2로 나누어 계산하기 위해", "4를 2와 2로 나누어 계산하기 위해"),
                ("모눈종이의 칸 수를 세기 쉽게 하기 위해", "모눈종이의 칸 수를 세기 쉽게 하기 위해"),
            ],
            correct="23을 자릿값에 따라 20과 3으로 나누어 각각 계산하기 위해",
            explanation="분배법칙의 시각적 이해를 위한 것입니다. "
            "23 × 4 = (20 + 3) × 4 = 20 × 4 + 3 × 4 원리를 "
            "넓이로 확인할 수 있으며, 십의 자리와 일의 자리를 분리해서 계산하는 알고리즘의 기초가 됩니다.",
        ),
        # ━━━━━━━━━━━━━━━━━━━━━━━━━━
        # 1학기 3단원: 나눗셈
        # ━━━━━━━━━━━━━━━━━━━━━━━━━━
        mc(
            id="e3-comp-007",
            concept_id="concept-e3-div1-01",
            category="computation",
            part="calc",
            difficulty=3,
            content="사탕 12개를 3명에게 똑같이 나누면 한 명당 몇 개씩인가요?",
            options=[
                ("3개", "3개"),
                ("4개", "4개"),
                ("9개", "9개"),
                ("15개", "15개"),
            ],
            correct="4개",
            explanation="12 ÷ 3 = 4입니다. "
            "이것은 '등분제' 나눗셈으로, 전체를 똑같은 수의 묶음으로 나눌 때 한 묶음의 개수를 구하는 것입니다. "
            "12 = 3 × 4로 확인할 수 있습니다.",
        ),
        mc(
            id="e3-comp-008",
            concept_id="concept-e3-div1-02",
            category="concept",
            part="calc",
            difficulty=5,
            content="다음 중 틀린 설명은?",
            options=[
                ("12 ÷ 4 = 3과 3 × 4 = 12는 서로 관련이 있다", "12 ÷ 4 = 3과 3 × 4 = 12는 서로 관련이 있다"),
                ("12 ÷ 4와 4 ÷ 12는 같은 값이다", "12 ÷ 4와 4 ÷ 12는 같은 값이다"),
                ("사과 12개를 4개씩 나누면 3묶음이 된다", "사과 12개를 4개씩 나누면 3묶음이 된다"),
                ("나눗셈에서 몫의 단위는 상황에 따라 달라진다", "나눗셈에서 몫의 단위는 상황에 따라 달라진다"),
            ],
            correct="12 ÷ 4와 4 ÷ 12는 같은 값이다",
            explanation="나눗셈은 교환법칙이 성립하지 않습니다! "
            "12 ÷ 4 = 3이지만 4 ÷ 12는 나누어떨어지지 않습니다. "
            "덧셈과 곱셈에서는 교환법칙이 성립하지만, 뺄셈과 나눗셈에서는 순서를 바꾸면 결과가 달라집니다.",
        ),
        mc(
            id="e3-comp-009",
            concept_id="concept-e3-div1-01",
            category="computation",
            part="calc",
            difficulty=6,
            content="구슬 20개를 4개씩 묶으면 몇 묶음인가요? 이 상황을 나타내는 나눗셈식은?",
            options=[
                ("20 ÷ 5 = 4", "20 ÷ 5 = 4"),
                ("20 ÷ 4 = 5", "20 ÷ 4 = 5"),
                ("4 ÷ 20 = 0.2", "4 ÷ 20 = 0.2"),
                ("20 - 4 = 16", "20 - 4 = 16"),
            ],
            correct="20 ÷ 4 = 5",
            explanation="'4개씩 묶으면 몇 묶음?'은 포함제 나눗셈입니다. "
            "전체 20개를 한 묶음 4개씩 덜어내면 5묶음이 됩니다. "
            "20 ÷ 4 = 5에서 몫 5의 단위는 '묶음'입니다.",
        ),
        # ━━━━━━━━━━━━━━━━━━━━━━━━━━
        # 2학기 7단원: 곱셈 (2)
        # ━━━━━━━━━━━━━━━━━━━━━━━━━━
        mc(
            id="e3-comp-010",
            concept_id="concept-e3-mul2-02",
            category="computation",
            part="calc",
            difficulty=5,
            content="34 × 12를 계산할 때, 다음 중 옳은 과정은?",
            options=[
                ("34 × 2 + 34 × 1 = 68 + 34 = 102", "34 × 2 + 34 × 1 = 68 + 34 = 102"),
                ("34 × 2 + 34 × 10 = 68 + 340 = 408", "34 × 2 + 34 × 10 = 68 + 340 = 408"),
                ("3 × 12 + 4 × 12 = 36 + 48 = 84", "3 × 12 + 4 × 12 = 36 + 48 = 84"),
                ("34 + 12 = 46", "34 + 12 = 46"),
            ],
            correct="34 × 2 + 34 × 10 = 68 + 340 = 408",
            explanation="12 = 10 + 2로 나누어야 합니다. "
            "12의 십의 자리 '1'은 실제로 '10'을 의미하므로 34 × 10 = 340이 되어야 합니다. "
            "'34 × 1 = 34'로 계산하는 것은 자릿수를 무시한 오류입니다.",
        ),
        mc(
            id="e3-comp-011",
            concept_id="concept-e3-mul2-01",
            category="computation",
            part="calc",
            difficulty=6,
            content="세로셈으로 계산할 때 빈칸에 들어갈 수는?\n\n    2 3\n  ×  4\n  -----\n    (  )",
            options=[
                ("812", "812"),
                ("92", "92"),
                ("82", "82"),
                ("102", "102"),
            ],
            correct="92",
            explanation="23 × 4 = (20 + 3) × 4 = 80 + 12 = 92입니다. "
            "'3 × 4 = 12, 2 × 4 = 8'을 나열해 812로 쓰는 것은 오류입니다. "
            "일의 자리 계산 결과 12에서 1을 십의 자리로 받아올려야 합니다.",
        ),
        mc(
            id="e3-comp-012",
            concept_id="concept-e3-mul2-02",
            category="concept",
            part="calc",
            difficulty=7,
            content="다음 계산 과정에서 0을 쓰는 이유는?\n\n    3 4\n  × 1 2\n  -----\n    6 8  ← 34 × 2\n  3 4 0  ← 34 × 10\n  -----\n  4 0 8",
            options=[
                ("계산을 편하게 하기 위해", "계산을 편하게 하기 위해"),
                ("자릿수를 맞추기 위해 (십의 자리 계산이므로)", "자릿수를 맞추기 위해 (십의 자리 계산이므로)"),
                ("0을 쓰지 않아도 상관없다", "0을 쓰지 않아도 상관없다"),
                ("두 자리 수를 만들기 위해", "두 자리 수를 만들기 위해"),
            ],
            correct="자릿수를 맞추기 위해 (십의 자리 계산이므로)",
            explanation="12의 '1'은 십의 자리이므로 실제로는 10입니다. "
            "34 × 10 = 340이므로 일의 자리에 0을 써서 340으로 표기해야 합니다. "
            "0을 생략하고 34로 쓰면 34 × 1로 계산한 것이 되어 결과가 틀립니다.",
        ),
        # ━━━━━━━━━━━━━━━━━━━━━━━━━━
        # 2학기 8단원: 나눗셈 (2)
        # ━━━━━━━━━━━━━━━━━━━━━━━━━━
        mc(
            id="e3-comp-013",
            concept_id="concept-e3-div2-01",
            category="computation",
            part="calc",
            difficulty=4,
            content="14 ÷ 3의 나머지는?",
            options=[
                ("1", "1"),
                ("2", "2"),
                ("3", "3"),
                ("5", "5"),
            ],
            correct="2",
            explanation="14 ÷ 3 = 4 ... 2입니다. "
            "3 × 4 = 12이고, 14 - 12 = 2가 남습니다. "
            "검산: 3 × 4 + 2 = 14 (맞음)\n"
            "나머지는 항상 나누는 수보다 작아야 합니다 (2 < 3).",
        ),
        mc(
            id="e3-comp-014",
            concept_id="concept-e3-div2-01",
            category="computation",
            part="calc",
            difficulty=6,
            content="다음 계산이 틀린 이유를 설명하세요.\n\n14 ÷ 3 = 3 ... 5",
            options=[
                ("몫이 틀렸다 (4가 되어야 함)", "몫이 틀렸다 (4가 되어야 함)"),
                ("나머지가 나누는 수 3보다 크거나 같다", "나머지가 나누는 수 3보다 크거나 같다"),
                ("계산식 자체가 성립하지 않는다", "계산식 자체가 성립하지 않는다"),
                ("나눗셈은 나머지가 있을 수 없다", "나눗셈은 나머지가 있을 수 없다"),
            ],
            correct="나머지가 나누는 수 3보다 크거나 같다",
            explanation="나머지는 항상 나누는 수보다 작아야 합니다. "
            "나머지가 5라면 3을 한 번 더 덜어낼 수 있으므로 몫이 3이 아니라 4가 되어야 합니다. "
            "나머지 < 나누는 수 (R < B) 조건을 항상 확인해야 합니다.",
        ),
        mc(
            id="e3-comp-015",
            concept_id="concept-e3-div2-02",
            category="computation",
            part="calc",
            difficulty=8,
            content="학생 14명을 3명씩 텐트에 배정하려고 합니다. 텐트는 최소 몇 개 필요한가요?",
            options=[
                ("3개", "3개"),
                ("4개", "4개"),
                ("5개", "5개"),
                ("6개", "6개"),
            ],
            correct="5개",
            explanation="14 ÷ 3 = 4 ... 2입니다. "
            "4개 텐트에 12명이 들어가고 2명이 남습니다. "
            "남는 2명도 텐트가 필요하므로 1개를 더 준비해야 합니다. "
            "이것은 '올림 상황'으로, 나머지가 있으면 몫에 1을 더해야 합니다. (정답: 5개)",
        ),
    ]
