# 개념 문항 가이드 구현 통합 보고서 (Phase 1~6) - 보완판

## 1. 프로젝트 개요
수학 교육의 핵심인 '개념 이해'를 심화하기 위해, **"표준 가이드: 수학교과 개념 문항 개발 프로토콜"**을 시스템 전반에 구현한 프로젝트입니다. 사용자 피드백을 반영하여 난이도 체계와 학년별 차등 비율을 정교화한 최종 결과 보고서입니다.

---

## 2. 단계별 구현 성과 및 보완 사항

### Phase 1: AI 프롬프트 3단 변환 필터 주입
*   **3단 프로토콜**: `Extract` → `Invert` → `Context` 전략 주입.
*   **QC 검증**: `[NO CALC]`, `[WHY]` 메타 규칙을 통한 개념 중심 문항 필터링.

### Phase 2: 데이터 모델 및 인프라 확장
*   `Question` 모델 내 `concept_method`, `fading_level` 필드 추가.
*   Alembic 마이그레이션 및 Pydantic 스키마 업데이트 완료.

### Phase 3: TYPE A — 점진적 빈칸 소거 (Gradual Fading)
*   **난이도 체계 교정**: 가이드의 교육적 목적에 따라 난이도 방향을 재설정하였습니다.
    *   **L1 (Difficulty 2)**: 조사/단순 수치 빈칸 (가장 쉬움)
    *   **L2 (Difficulty 4)**: 주요 용어 빈칸
    *   **L3 (Difficulty 6)**: 논리적 관계 빈칸
    *   **L4 (Difficulty 8)**: 핵심 문장 전체 인출 (가장 어려움)
*   `ConceptGenerator` 내 4단계 생성 로직 최적화 완료.

### Phase 4: TYPE B — 오개념 분석 (Error Analysis)
*   **오개념 파이프라인**: `misconceptions` 데이터를 연동하여 지혜/민수 등 페르소나 기반 "틀린 풀이 찾기" 문항 생성.
*   비판적 사고 및 추론 능력 배양에 초점.

### Phase 5: TYPE C — 시각적 해체 (Visual Decoding)
*   **하이라이트 지원**: `**TEXT**` 문법을 감지하여 붉은색 강조 UI로 렌더링하는 `MathText` 고도화.
*   Admin 페이지에서 전략별 수동 생성 및 미리보기 지원.

### Phase 6: 학년군별 차등 비율 적용 (Differential Ratios)
*   **학년별 학습 모델 반영**: 가이드 제3원칙에 따라 학년군별로 개념 교수법 노출 비율을 차등화하였습니다.
    *   **1-2학년군 (Type C 우선)**: 시각적 이해 및 직관적 파악 강조 (Type C 30%)
    *   **3-4학년군 (Type B 우선)**: 흔한 실수 교정 및 오개념 분석 강조 (Type B 30%)
    *   **5-6학년/중등 (Type A 우선)**: 논리적 문장 인출 및 개념 정교화 강조 (Type A 30%)

---

## 3. 정량적 검증 결과

### 3.1 학년군별 문항 생성 비율 시뮬레이션 (1,000회 수행)
| 구분 | 1-2G (Type C Focus) | 3-4G (Type B Focus) | 5-6G+ (Type A Focus) |
| :--- | :---: | :---: | :---: |
| **Standard** | 39.0% | 37.8% | 40.7% |
| **Type A (Fading)** | 11.2% | 11.6% | **28.7%** |
| **Type B (Error)** | 18.9% | **32.5%** | 15.3% |
| **Type C (Visual)** | **30.9%** | 18.1% | 15.3% |

### 3.2 Phase 3 난이도 매핑 검증
- **L1 (Hint-rich)** → Difficulty **2** (OK)
- **L4 (Full Recall)** → Difficulty **8** (OK)

---

## 4. 향후 작업 제안
1. **데이터 기반 튜닝**: 대시보드에 학년별 정답률 통계를 추가하여 노출 비율을 자동 최적화하는 동적 알고리즘 도입.
2. **E2E 통합 테스트**: 전체 학습 flow(생성→풀이→채점→반영)에 대한 종합 시나리오 테스트.

---
**보고서 위치**: `docs/work-plans/concept-question-guide-integrated-report.md`
